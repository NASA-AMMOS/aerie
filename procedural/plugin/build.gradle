plugins {
  id 'groovy-gradle-plugin'
  id "maven-publish"
}

// adding this as an implementation dependency here allows usage in our convention plugin
dependencies {
  implementation("com.gradleup.shadow:shadow-gradle-plugin:8.3.2")
}

tasks.publish {
  dependsOn("check")
}

version = '0.0.1'

publishing {
  publications {
    maven(MavenPublication)
  }
  repositories {
    maven {
      name = "GitHubPackages"
      url = "https://maven.pkg.github.com/skovati/copie"
      credentials {
        username = System.getenv("GITHUB_ACTOR")
        password = System.getenv("GITHUB_TOKEN")
      }
    }
  }
}
