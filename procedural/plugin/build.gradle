plugins {
  id 'groovy-gradle-plugin'
  id 'com.gradle.plugin-publish' version '1.3.0'
}

// adding this as an implementation dependency here allows usage in our convention plugin
dependencies {
  implementation("com.gradleup.shadow:shadow-gradle-plugin:8.3.2")
}

tasks.publish {
  dependsOn("check")
}

version = '0.0.1'

gradlePlugin {
  website = 'https://ammos.nasa.gov/aerie'
  vcsUrl = 'https://github.com/NASA-AMMOS/aerie'

  plugins {
    matching { it.name == 'gov.nasa.ammos.aerie.procedural.plugin' }.configureEach {
      id = "gov.nasa.ammos.aerie.procedural.plugin"
      displayName = "NASA AMMOS Aerie Procedural Plugin"
      description = "Provides gradle tasks for building scheduling & constraint procedures for the Aerie system"
      tags.set(['ammos', 'aerie'])
      implementationClass = "GovNasaAmmosAerieProceduralPluginPlugin"
    }
  }
}

